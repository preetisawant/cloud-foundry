---

copyright:

  years: 2018
lastupdated: "2018-11-14"

---

{:shortdesc: .shortdesc}
{:new_window: target="_blank"}
{:codeblock: .codeblock}
{:pre: .pre}
{:screen: .screen}
{:tip: .tip}

# Updating and scaling
{: #update-scale}

Update the {{site.data.keyword.cfee_full_notm}} service instance to the latest version to get the latest CFEE functions and fixes. Updates for ICDEE can include new versions of the Cloud Foundry platform and Kubernetes cluster that supports the CFEE infrastructure.

The CFEE version updates take place on the control plane containing the CFEE components and on the cells. You can also scale the capacity of your CFEE instance by adding or deleting application cells.

**Note:** During a version update or while cells are being added or deleted, some metrics (e.g., Memory and CPU) shown in the _Overview_, _Resource Usage_ and _Update and Scaling_ pages may not be available.

## Updating the CFEE version
{: #update}

Updating the CFEE version of your CFEE instance is a two-step process. First, update the control plane that hosts the CFEE componentry. Then, update the cells that host your applications.

The following rules and constraints apply:
* The control plane must be updated first. Once the control plane has been updated the cells can be updated.
* Application cells can be updated only to the version of the control plane.  That is, control plane cells can be at a higher CFEE version level than application cells, but not viceversa.

To update the CFEE version of your CFEE instance:
1. Go to the [{{site.data.keyword.Bluemix_notm}} dashboard](https://console.bluemix.net/dashboard/apps/) and open the {{site.data.keyword.cfee_full_notm}} that you want to update.
2. In {{site.data.keyword.cfee_full_notm}}, go to the **Cells** entry in the navigation pane to open the cells page.
3. (optional) In the _Control Plane_ table you can expand the row to see the worker nodes in the control plane.
4. Click **Update**.
5. In the Update _Control Plane_ dialog, select one of the available CFEE versions and click **Update**.The update takes about 5 minutes.  The version description details the versions of the components included in the selected CFEE version package, along with a link to the _What's New_ document describing the content delivered in that version.
6. The _Nodes Status_ column shows the progress of the update. Once the update is complete, the _Version_ column reflects the new CFEE version.
7. Once the update of the control plane cells is complete, find the _Cells_ table and click **Update**.
8. In the _Update Control Plane_ dialog select the CFEE version and click *Update*. There is only available version for the cells to update because cells can be updated only to the version of the control plane. A single update action updates all cells.
9. Cells are updated sequentially. The _Nodes Status_ column indicates the progress of the update for each cell. As cells are updated, their new version is reflected in the _Version_ column.

## Disruptions during version update
{: #update-disruption}

Updating the Cloud Foundry control plane is not disruptive.  However, updating Cloud Foundry cells to a new CFEE version may disrupt the operation of the CFEE environment.  The updated is performed one cell at a time, so that application instances running in a cell are brought back up once the update is completed while the other cells are down during their update. Nevertheless, some applications and services running in the CFEE may become unavailable under some circumstances. For example, if the CFEE has two Cloud Foundry cells to full capacity, an application with only one instance will be down during the version update because the application instance cannot be moved to another cell while the cell is being updated and, consequently, the application will be unavailable.  

During the version update there may be a discrepancy in the Memory and CPU metrics reported in the Cell Nodes gauges shown in the CFEE _Overview_ page (which are generated by the Kubernetes cluster) and the same metrics shown in the _Nodes_ dashboard in Grafana (which are generated a the operating system level).

The status of CFEE components while the updating is in progress will be reflected in the Health Check page.  The restart takes approximately 45 minutes.

## Version cycle and support policy
{: #version-cycle}

The Cloud Foundry Enterprise Environment service typically releases a new version on a regulary basis. The service's version follows the semantic versioning format _**Major.Minor.Patch**_ (https://semver.org/)

The _minor_ version is incremented regularly (typically, monthly). The _major_ version is also incremented also, but less frequently, typically when there is a significant change.  Updating to a _Major_ version may result in some disruption during upgrade. _Patches_ deliver a fix and are applied to the latest available version. 

To prevent system downtime, CFEE instances are only allowed to update up to 2 _major_ versions ahead of its current version. Using the previous example, if the CFEE instance current version is 3.1.2, and the target version is 7.0.0, the CFEE instance would need to be updated first to version 5.x.x, and then to the target version 7.0.0 .

New capabilities and enhancements to existing capabilities delivered regularly become available only in the latest version. Critical fixes are delivered in the latest release within only the latest 3 _major_ versions (the latest version and the two previous versions). For example, if versions 4.x.x, 3.x.x and 2.x.x are available, versions 1.x.x will not be supported (i.e.,  patches will not be delivered with fixes for versions 1.x.x).  

Patches are delivered on the latest available version of a given _major_. For example, if a CFEE instance is running version 3.1.2 but the latest available version in the 3.x.x _major_ is version 3.3.4, any patches will be delivered on the code base of version 3.3.x, which means that the patch will be delivered in a (new) version 3.3.5. The CFEE instance with version 3.1.2 would need to be updated to version 3.3.5 in order to receive the new patch (i.e., udating just to version 3.3.4 will not solve the provlem fixed in the patch, which is delivered only in version 3.3.5).

## Scaling the CFEE infrastructure
{: #scale}

To add application cells in your CFEE instance:
1. Go to the [{{site.data.keyword.Bluemix_notm}} dashboard](https://console.bluemix.net/dashboard/apps/) and open the {{site.data.keyword.cfee_full_notm}} where you want add cells.
2. Click **Add cell** near the _Cells_ table, which opens the _Add Cloud Foundry Cells_ page.
3. In the _Add Cloud Foundry Cells_ page, select the number of cells to add. The page also shows the geography and location of the CFEE instance where they cells will be added. It also shows the current number of cells and the capacity of the cells to be added (which is the same as the capacity of the current cells). The page's right pane shows the estimated cost of the added cells along with the new total estimated cost of the environment.
4. Click **Add cell**.  
5. Go to the _Nodes_ page. A new row is added in the _Cells_ table for each new node. The _Node Status_ column indicates the progress of adding and deploying the cell to your CFEE environment.
